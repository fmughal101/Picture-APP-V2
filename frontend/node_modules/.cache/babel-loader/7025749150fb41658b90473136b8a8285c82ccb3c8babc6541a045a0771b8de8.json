{"ast":null,"code":"var _jsxFileName = \"/Users/faizanm/Documents/Coding Projects/pictureappv2/frontend/src/components/Menu/Menu.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useCallback, useRef, useContext } from \"react\";\nimport appearanceContext from \"../../utils/Context\";\nimport axios from \"axios\";\nimport \"animate.css\";\nimport \"./MenuCSS.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Menu = _ref => {\n  _s();\n  let {\n    setMenu,\n    postID,\n    user,\n    setDescription,\n    setError,\n    rerender\n  } = _ref;\n  const menu = useRef();\n  const [edit, setEdit] = useState(false);\n  const [editValue, setEditValue] = useState(\"\");\n  const [deletePost, setDeletePost] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    appearance\n  } = useContext(appearanceContext);\n  const handleEdit = useCallback(async () => {\n    const token = user && (await user.getIdToken());\n    const headers = token ? {\n      authtoken: token\n    } : {};\n    try {\n      setIsLoading(true);\n      const response = await axios.put(`/api/posts/editPost/${postID}`, {\n        newDescription: editValue\n      }, {\n        headers\n      });\n      setMenu(false);\n      setDescription(response.data.description);\n    } catch (err) {\n      setMenu(false);\n      setError(err.response.data.status);\n    }\n  }, [user, postID, editValue, setMenu, setError, setDescription]);\n  const handleDelete = useCallback(async () => {\n    const token = user && (await user.getIdToken());\n    const headers = token ? {\n      authtoken: token\n    } : {};\n    try {\n      setIsLoading(true);\n      const response = await axios.delete(`/api/posts/deletePost/${postID}`, {\n        headers\n      });\n      setMenu(false);\n      rerender.setRerender(!rerender.rerender);\n    } catch (err) {\n      setMenu(false);\n      setError(err.response.data.status);\n    }\n  }, [user, postID, setMenu, setError, rerender]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: !appearance ? \"menu-container horizontal\" : \"menu-container horizontal dark\",\n      ref: menu,\n      onClick: e => {\n        if (e.target === menu.current) {\n          setMenu(false);\n          rerender.setRerender(!rerender.rerender);\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"menu\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"menu-title\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n  if (edit) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: !appearance ? \"menu-container horizontal\" : \"menu-container horizontal dark\",\n      ref: menu,\n      onClick: e => {\n        if (e.target === menu.current) {\n          setMenu(false);\n          rerender.setRerender(!rerender.rerender);\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"menu\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"menu-title\",\n          children: \"What would you like to change the description too?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: editValue,\n          onChange: e => setEditValue(e.target.value),\n          cols: \"30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"horizontal\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-item red\",\n            onClick: () => setMenu(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-item\",\n            onClick: handleEdit,\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n  if (deletePost) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: !appearance ? \"menu-container horizontal\" : \"menu-container horizontal dark\",\n      ref: menu,\n      onClick: e => {\n        if (e.target === menu.current) {\n          setMenu(false);\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"menu\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"menu-title\",\n          children: \"Are you sure you want to delete this post?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"horizontal\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-item\",\n            onClick: () => setMenu(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-item red\",\n            onClick: handleDelete,\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: !appearance ? \"menu-container\" : \"menu-container dark\",\n    ref: menu,\n    onClick: e => {\n      if (e.target === menu.current) {\n        setMenu(false);\n      }\n    },\n    children: /*#__PURE__*/_jsxDEV(\"menu\", {\n      className: \"animate__animated animate__zoomIn animate__faster\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-item\",\n        onClick: () => setEdit(true),\n        children: \"Edit Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-item red\",\n        onClick: () => setDeletePost(true),\n        children: \"Delete Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n_s(Menu, \"DhJel98b2Fw8SD1KdgFrMVqU950=\");\n_c = Menu;\nexport default Menu;\nvar _c;\n$RefreshReg$(_c, \"Menu\");","map":{"version":3,"names":["useState","useCallback","useRef","useContext","appearanceContext","axios","Menu","setMenu","postID","user","setDescription","setError","rerender","menu","edit","setEdit","editValue","setEditValue","deletePost","setDeletePost","isLoading","setIsLoading","appearance","handleEdit","token","getIdToken","headers","authtoken","response","put","newDescription","data","description","err","status","handleDelete","delete","setRerender","e","target","current","value"],"sources":["/Users/faizanm/Documents/Coding Projects/pictureappv2/frontend/src/components/Menu/Menu.jsx"],"sourcesContent":["import { useState, useCallback, useRef, useContext } from \"react\";\nimport appearanceContext from \"../../utils/Context\";\nimport axios from \"axios\";\nimport \"animate.css\";\nimport \"./MenuCSS.css\";\n\nconst Menu = ({\n  setMenu,\n  postID,\n  user,\n  setDescription,\n  setError,\n  rerender,\n}) => {\n  const menu = useRef();\n  const [edit, setEdit] = useState(false);\n  const [editValue, setEditValue] = useState(\"\");\n  const [deletePost, setDeletePost] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const { appearance } = useContext(appearanceContext);\n\n  const handleEdit = useCallback(async () => {\n    const token = user && (await user.getIdToken());\n    const headers = token ? { authtoken: token } : {};\n\n    try {\n      setIsLoading(true);\n      const response = await axios.put(\n        `/api/posts/editPost/${postID}`,\n        {\n          newDescription: editValue,\n        },\n        { headers }\n      );\n\n      setMenu(false);\n      setDescription(response.data.description);\n    } catch (err) {\n      setMenu(false);\n      setError(err.response.data.status);\n    }\n  }, [user, postID, editValue, setMenu, setError, setDescription]);\n\n  const handleDelete = useCallback(async () => {\n    const token = user && (await user.getIdToken());\n    const headers = token ? { authtoken: token } : {};\n\n    try {\n      setIsLoading(true);\n\n      const response = await axios.delete(`/api/posts/deletePost/${postID}`, {\n        headers,\n      });\n      setMenu(false);\n      rerender.setRerender(!rerender.rerender);\n    } catch (err) {\n      setMenu(false);\n      setError(err.response.data.status);\n    }\n  }, [user, postID, setMenu, setError, rerender]);\n\n  if (isLoading) {\n    return (\n      <div\n        className={\n          !appearance\n            ? \"menu-container horizontal\"\n            : \"menu-container horizontal dark\"\n        }\n        ref={menu}\n        onClick={(e) => {\n          if (e.target === menu.current) {\n            setMenu(false);\n            rerender.setRerender(!rerender.rerender);\n          }\n        }}\n      >\n        <menu>\n          <div className=\"menu-title\">Loading...</div>\n        </menu>\n      </div>\n    );\n  }\n\n  if (edit) {\n    return (\n      <div\n        className={\n          !appearance\n            ? \"menu-container horizontal\"\n            : \"menu-container horizontal dark\"\n        }\n        ref={menu}\n        onClick={(e) => {\n          if (e.target === menu.current) {\n            setMenu(false);\n            rerender.setRerender(!rerender.rerender);\n          }\n        }}\n      >\n        <menu>\n          <div className=\"menu-title\">\n            What would you like to change the description too?\n          </div>\n          <textarea\n            value={editValue}\n            onChange={(e) => setEditValue(e.target.value)}\n            cols=\"30\"\n          />\n          <div className=\"horizontal\">\n            <div className=\"menu-item red\" onClick={() => setMenu(false)}>\n              Cancel\n            </div>\n            <div className=\"menu-item\" onClick={handleEdit}>\n              Edit\n            </div>\n          </div>\n        </menu>\n      </div>\n    );\n  }\n\n  if (deletePost) {\n    return (\n      <div\n        className={\n          !appearance\n            ? \"menu-container horizontal\"\n            : \"menu-container horizontal dark\"\n        }\n        ref={menu}\n        onClick={(e) => {\n          if (e.target === menu.current) {\n            setMenu(false);\n          }\n        }}\n      >\n        <menu>\n          <div className=\"menu-title\">\n            Are you sure you want to delete this post?\n          </div>\n          <div className=\"horizontal\">\n            <div className=\"menu-item\" onClick={() => setMenu(false)}>\n              Cancel\n            </div>\n            <div className=\"menu-item red\" onClick={handleDelete}>\n              Delete\n            </div>\n          </div>\n        </menu>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={!appearance ? \"menu-container\" : \"menu-container dark\"}\n      ref={menu}\n      onClick={(e) => {\n        if (e.target === menu.current) {\n          setMenu(false);\n        }\n      }}\n    >\n      <menu className=\"animate__animated animate__zoomIn animate__faster\">\n        <div className=\"menu-item\" onClick={() => setEdit(true)}>\n          Edit Post\n        </div>\n        <div className=\"menu-item red\" onClick={() => setDeletePost(true)}>\n          Delete Post\n        </div>\n      </menu>\n    </div>\n  );\n};\n\nexport default Menu;\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,MAAM,EAAEC,UAAU,QAAQ,OAAO;AACjE,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,aAAa;AACpB,OAAO,eAAe;AAAC;AAEvB,MAAMC,IAAI,GAAG,QAOP;EAAA;EAAA,IAPQ;IACZC,OAAO;IACPC,MAAM;IACNC,IAAI;IACJC,cAAc;IACdC,QAAQ;IACRC;EACF,CAAC;EACC,MAAMC,IAAI,GAAGX,MAAM,EAAE;EACrB,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACgB,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACoB,SAAS,EAAEC,YAAY,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM;IAAEsB;EAAW,CAAC,GAAGnB,UAAU,CAACC,iBAAiB,CAAC;EAEpD,MAAMmB,UAAU,GAAGtB,WAAW,CAAC,YAAY;IACzC,MAAMuB,KAAK,GAAGf,IAAI,KAAK,MAAMA,IAAI,CAACgB,UAAU,EAAE,CAAC;IAC/C,MAAMC,OAAO,GAAGF,KAAK,GAAG;MAAEG,SAAS,EAAEH;IAAM,CAAC,GAAG,CAAC,CAAC;IAEjD,IAAI;MACFH,YAAY,CAAC,IAAI,CAAC;MAClB,MAAMO,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAG,CAC7B,uBAAsBrB,MAAO,EAAC,EAC/B;QACEsB,cAAc,EAAEd;MAClB,CAAC,EACD;QAAEU;MAAQ,CAAC,CACZ;MAEDnB,OAAO,CAAC,KAAK,CAAC;MACdG,cAAc,CAACkB,QAAQ,CAACG,IAAI,CAACC,WAAW,CAAC;IAC3C,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ1B,OAAO,CAAC,KAAK,CAAC;MACdI,QAAQ,CAACsB,GAAG,CAACL,QAAQ,CAACG,IAAI,CAACG,MAAM,CAAC;IACpC;EACF,CAAC,EAAE,CAACzB,IAAI,EAAED,MAAM,EAAEQ,SAAS,EAAET,OAAO,EAAEI,QAAQ,EAAED,cAAc,CAAC,CAAC;EAEhE,MAAMyB,YAAY,GAAGlC,WAAW,CAAC,YAAY;IAC3C,MAAMuB,KAAK,GAAGf,IAAI,KAAK,MAAMA,IAAI,CAACgB,UAAU,EAAE,CAAC;IAC/C,MAAMC,OAAO,GAAGF,KAAK,GAAG;MAAEG,SAAS,EAAEH;IAAM,CAAC,GAAG,CAAC,CAAC;IAEjD,IAAI;MACFH,YAAY,CAAC,IAAI,CAAC;MAElB,MAAMO,QAAQ,GAAG,MAAMvB,KAAK,CAAC+B,MAAM,CAAE,yBAAwB5B,MAAO,EAAC,EAAE;QACrEkB;MACF,CAAC,CAAC;MACFnB,OAAO,CAAC,KAAK,CAAC;MACdK,QAAQ,CAACyB,WAAW,CAAC,CAACzB,QAAQ,CAACA,QAAQ,CAAC;IAC1C,CAAC,CAAC,OAAOqB,GAAG,EAAE;MACZ1B,OAAO,CAAC,KAAK,CAAC;MACdI,QAAQ,CAACsB,GAAG,CAACL,QAAQ,CAACG,IAAI,CAACG,MAAM,CAAC;IACpC;EACF,CAAC,EAAE,CAACzB,IAAI,EAAED,MAAM,EAAED,OAAO,EAAEI,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAE/C,IAAIQ,SAAS,EAAE;IACb,oBACE;MACE,SAAS,EACP,CAACE,UAAU,GACP,2BAA2B,GAC3B,gCACL;MACD,GAAG,EAAET,IAAK;MACV,OAAO,EAAGyB,CAAC,IAAK;QACd,IAAIA,CAAC,CAACC,MAAM,KAAK1B,IAAI,CAAC2B,OAAO,EAAE;UAC7BjC,OAAO,CAAC,KAAK,CAAC;UACdK,QAAQ,CAACyB,WAAW,CAAC,CAACzB,QAAQ,CAACA,QAAQ,CAAC;QAC1C;MACF,CAAE;MAAA,uBAEF;QAAA,uBACE;UAAK,SAAS,EAAC,YAAY;UAAA,UAAC;QAAU;UAAA;UAAA;UAAA;QAAA;MAAM;QAAA;QAAA;QAAA;MAAA;IACvC;MAAA;MAAA;MAAA;IAAA,QACH;EAEV;EAEA,IAAIE,IAAI,EAAE;IACR,oBACE;MACE,SAAS,EACP,CAACQ,UAAU,GACP,2BAA2B,GAC3B,gCACL;MACD,GAAG,EAAET,IAAK;MACV,OAAO,EAAGyB,CAAC,IAAK;QACd,IAAIA,CAAC,CAACC,MAAM,KAAK1B,IAAI,CAAC2B,OAAO,EAAE;UAC7BjC,OAAO,CAAC,KAAK,CAAC;UACdK,QAAQ,CAACyB,WAAW,CAAC,CAACzB,QAAQ,CAACA,QAAQ,CAAC;QAC1C;MACF,CAAE;MAAA,uBAEF;QAAA,wBACE;UAAK,SAAS,EAAC,YAAY;UAAA,UAAC;QAE5B;UAAA;UAAA;UAAA;QAAA,QAAM,eACN;UACE,KAAK,EAAEI,SAAU;UACjB,QAAQ,EAAGsB,CAAC,IAAKrB,YAAY,CAACqB,CAAC,CAACC,MAAM,CAACE,KAAK,CAAE;UAC9C,IAAI,EAAC;QAAI;UAAA;UAAA;UAAA;QAAA,QACT,eACF;UAAK,SAAS,EAAC,YAAY;UAAA,wBACzB;YAAK,SAAS,EAAC,eAAe;YAAC,OAAO,EAAE,MAAMlC,OAAO,CAAC,KAAK,CAAE;YAAA,UAAC;UAE9D;YAAA;YAAA;YAAA;UAAA,QAAM,eACN;YAAK,SAAS,EAAC,WAAW;YAAC,OAAO,EAAEgB,UAAW;YAAA,UAAC;UAEhD;YAAA;YAAA;YAAA;UAAA,QAAM;QAAA;UAAA;UAAA;UAAA;QAAA,QACF;MAAA;QAAA;QAAA;QAAA;MAAA;IACD;MAAA;MAAA;MAAA;IAAA,QACH;EAEV;EAEA,IAAIL,UAAU,EAAE;IACd,oBACE;MACE,SAAS,EACP,CAACI,UAAU,GACP,2BAA2B,GAC3B,gCACL;MACD,GAAG,EAAET,IAAK;MACV,OAAO,EAAGyB,CAAC,IAAK;QACd,IAAIA,CAAC,CAACC,MAAM,KAAK1B,IAAI,CAAC2B,OAAO,EAAE;UAC7BjC,OAAO,CAAC,KAAK,CAAC;QAChB;MACF,CAAE;MAAA,uBAEF;QAAA,wBACE;UAAK,SAAS,EAAC,YAAY;UAAA,UAAC;QAE5B;UAAA;UAAA;UAAA;QAAA,QAAM,eACN;UAAK,SAAS,EAAC,YAAY;UAAA,wBACzB;YAAK,SAAS,EAAC,WAAW;YAAC,OAAO,EAAE,MAAMA,OAAO,CAAC,KAAK,CAAE;YAAA,UAAC;UAE1D;YAAA;YAAA;YAAA;UAAA,QAAM,eACN;YAAK,SAAS,EAAC,eAAe;YAAC,OAAO,EAAE4B,YAAa;YAAA,UAAC;UAEtD;YAAA;YAAA;YAAA;UAAA,QAAM;QAAA;UAAA;UAAA;UAAA;QAAA,QACF;MAAA;QAAA;QAAA;QAAA;MAAA;IACD;MAAA;MAAA;MAAA;IAAA,QACH;EAEV;EAEA,oBACE;IACE,SAAS,EAAE,CAACb,UAAU,GAAG,gBAAgB,GAAG,qBAAsB;IAClE,GAAG,EAAET,IAAK;IACV,OAAO,EAAGyB,CAAC,IAAK;MACd,IAAIA,CAAC,CAACC,MAAM,KAAK1B,IAAI,CAAC2B,OAAO,EAAE;QAC7BjC,OAAO,CAAC,KAAK,CAAC;MAChB;IACF,CAAE;IAAA,uBAEF;MAAM,SAAS,EAAC,mDAAmD;MAAA,wBACjE;QAAK,SAAS,EAAC,WAAW;QAAC,OAAO,EAAE,MAAMQ,OAAO,CAAC,IAAI,CAAE;QAAA,UAAC;MAEzD;QAAA;QAAA;QAAA;MAAA,QAAM,eACN;QAAK,SAAS,EAAC,eAAe;QAAC,OAAO,EAAE,MAAMI,aAAa,CAAC,IAAI,CAAE;QAAA,UAAC;MAEnE;QAAA;QAAA;QAAA;MAAA,QAAM;IAAA;MAAA;MAAA;MAAA;IAAA;EACD;IAAA;IAAA;IAAA;EAAA,QACH;AAEV,CAAC;AAAC,GAxKIb,IAAI;AAAA,KAAJA,IAAI;AA0KV,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}